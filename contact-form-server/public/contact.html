<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact me</title>
    <link rel="stylesheet" href="contact.css">
</head>
<body>
    <nav class="main-navigator">
        <ul class="left-nav">
            <!--<li><a href="#">About</a></li>-->
            <li><a href="../../index.html">Curriculum vitae</a></li>
            <li><a href="contact.html">Contact me</a></li>
        </ul>
        <ul class="right-nav">
            <li><a href=""><em>Version française à venir</em></a></li>
        </ul>
    </nav>

    <div class="left-pane">
        <h1 id="contact-me">Contact me</h1>
    </div>
    <div class="right-pane">
        <p>I look forward to hearing from you. I will get back to you as soon as possible</p>
        <form id="contact-form">
            <input type="text" name="name" id="name" placeholder="Name" required>
            <input type="email" name="email" id="email" placeholder="Email Address" required>
            <input type="url" name="website" id="website" placeholder="Website">
            <textarea name="message" id="message" cols="30" rows="10" placeholder="Your message goes here" required></textarea>
            <button type="submit">Send</button>
        </form>

        <script>
            // Creates a tool to read URL parameters (like '?status=success')
            const urlParams = new URLSearchParams(window.location.search);
            // Gets the 'status' value from the URL (e.g., 'success' or 'error')
            const status = urlParams.get('status');
            // If status is 'success', show a popup saying it worked
            if (status === 'success') {
            alert('Message sent successfully!');
            // If status is 'error', show a popup saying it failed
            } else if (status === 'error') {
                alert('Error sending message');
            }
        </script>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
        (function() {
            emailjs.init('2NweU0Fy6RmJNQxQK')
        })();
        document.getElementById("contact-form").addEventListener('submit', function(event){
            event.preventDefault(); //prevent page reload
            
            emailjs.sendform('service_thkk4wm', 'template_7lshest', this)
            .then(function(){
                console.log('Sent!');
                window.location.href = 'contact.html?status=success';
            }, function(error){
                console.log('Failed...', error);
                window.location.href = 'contact.html?status=error';
            });

        })
       
    </script>
</body>
</html>